buildscript {
	repositories {
		maven { url = 'https://maven.minecraftforge.net' }
		jcenter()
		mavenCentral()
		maven { url = 'https://repo.spongepowered.org/repository/maven-public/' }
		maven { url "https://plugins.gradle.org/m2/" }
	}
	dependencies {
		classpath group: 'net.minecraftforge.gradle', name: 'ForgeGradle', version: '3.+', changing: true
		classpath 'org.spongepowered:mixingradle:0.7-SNAPSHOT'
		classpath "gradle.plugin.com.matthewprenger:CurseGradle:1.4.0"
		classpath group: 'gradle.plugin.com.modrinth.minotaur', name: 'Minotaur', version: '1.1.0'
	}
}

apply plugin: 'net.minecraftforge.gradle'
apply plugin: 'maven-publish'
apply plugin: 'maven'
apply plugin: 'org.spongepowered.mixin'

version = "${mc_version}-${mod_version}-forge"
group = "com.telepathicgrunt"
archivesBaseName = "${modid}"

sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8' // Need this here so eclipse task generates correctly.

minecraft {
	mappings channel:"official", version:"1.16.5"
    accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')

    runs {
        client {
            workingDirectory project.file('run')
			arg "-mixin.config="+archivesBaseName+".mixins.json"
			property 'mixin.env.remapRefMap', 'true'
			property 'mixin.env.refMapRemappingFile', "${projectDir}/build/createSrgToMcp/output.srg"
            mods { the_bumblezone { source sourceSets.main } }
        }

        server {
            workingDirectory project.file('run')
			arg "-mixin.config="+archivesBaseName+".mixins.json"
			property 'mixin.env.remapRefMap', 'true'
			property 'mixin.env.refMapRemappingFile', "${projectDir}/build/createSrgToMcp/output.srg"
            mods { the_bumblezone { source sourceSets.main } }
        }
    }
}


repositories {
	maven {
		url "https://maven.tterrag.com/"
	}
	maven {
		// location of the maven that hosts JEI files
		name = "Progwml6 maven"
		url = "https://dvs1.progwml6.com/files/maven/"
	}
	maven {
		// location of a maven mirror for JEI files, as a fallback
		name = "ModMaven"
		url = "https://modmaven.k-4u.nl"
	}
	flatDir {
		dirs 'deps'
	}
	maven {
		url "https://nexus.resourcefulbees.com/repository/maven-public/"
	}
	maven {
		name = "Jared"
		url = "https://maven.blamejared.com"
	}
}

dependencies {
    minecraft "net.minecraftforge:forge:${mc_version}-${forge_version}"
	if (System.getProperty("idea.sync.active") != "true") {
		annotationProcessor 'org.spongepowered:mixin:0.8.2:processor'
	}

	implementation fg.deobf("ignored:productivebees-1.16.5:0.6.9.11")
	implementation fg.deobf("ignored:ResourcefulBees-1.16.5:0.6.7.2b")
	implementation fg.deobf("ignored:carrierbees-1.16.4:0.0.4.11-8")
	//implementation fg.deobf("noobanidus.mods:carrier-bees:1.16.4:0.0.4.11-8")
	implementation fg.deobf("ignored:potionofbees-1.16.4:1.1.0.2")
	implementation fg.deobf("ignored:amb-1.16.4:0.1.1")
	implementation fg.deobf("ignored:buzzier_bees-1.16.5:3.0.1")
	implementation fg.deobf("ignored:abnormals_core-1.16.5:3.1.1")
	implementation fg.deobf("ignored:pokecube-aio-1.16.5:3.11.5")
	implementation fg.deobf("ignored:charm-forge-1.16.5:2.3.2")
	implementation fg.deobf("com.telepathicgrunt:Blame:1.16.5-3.0.0-forge")

	compileOnly fg.deobf("mezz.jei:jei-1.16.3:7.6.0.49:api")
	runtimeOnly fg.deobf("mezz.jei:jei-1.16.3:7.6.0.49")
	//runtimeOnly fg.deobf("ignored:modname-1.15.2:x.x.x")
}

mixin { add sourceSets.main, "the_bumblezone.refmap.json" }

apply from: 'gradle/processresources.gradle'
apply from: 'gradle/manifest.gradle'
apply from: 'gradle/maven.gradle'
apply from: 'gradle/curseforge.gradle'
apply from: 'gradle/modrinth.gradle'
